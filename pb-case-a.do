/**********************************************************************************File        : pb-case-a.do  <--- this should be the exact name of THIS documentAuthor      : Kristina Tobio Created     : 07 Nov 2016Modified    : 08 Nov 2016Description : .do file for Pilgrim Bank Part A **********************************************************************************/// these commands prepare your computer for the data and analysis// this finds and closes open log filescapture log close        // this clears Stata's data memory so new data can be loadedclear       // this makes it so you don't have to keep pressing return/enter to scroll through resultsset more off          // this sets memory sizeset mem 100m       // this keeps everything visible on a normal monitor or laptop screenset linesize 200    // cd means "change directory"// you need to change this to the location on your computer where you are storing the .do and data files*cd "/Users/ktobio/Desktop/Jeff/Course/Pilgrim Bank/pb-case/"       // this creates a log file, which will record all of the commands and outputs from this .do file // log files should be placed in a folder named "logs" in your directory log using "logs/pb-case-a", replace// data should be placed in a folder named "data" in your directory // the data is in .csv (comma seperated values) format// this command reads the data into Statainsheet using "data/pb-case-data.csv", names// code here that labels the variables?// save the data as a Stata datasetsave pb-case-data.dta, replace// displays summary statistics for all variablessummarize // displays more detailed summary statistics for a particular variable// note "summarize" and "sum" are the same commandsum _9profit, detail// Walking through the statistics review // PART 1: EXPLORE PROFIT// calculating the 95% confidence interval for average (mean) customer profitability in 1999ci mean _9profit, level(95)// PART 2: COMPARE PROFITABILITY OF ONLINE AND OFFLINE CUSTOMERS// the _9online variable is a categorical variable, which equals 1 if a customer is online and equals 0 if a customer is offline// the bysort command allows us to compare the average profitability of online and offline customersbysort _9online: sum _9profit// is the difference between the mean profitability for online and offline customers significant?// we can test this in two ways, a t-test and a regression:// t-testttest _9profit, by(_9online)// regressionregress _9profit _9online// PART 3: MANAGING MISSING DATA// regression controlling for ageregress _9profit _9online _9age// when we add _9age to our regression, we see there are fewer observations in our regression// it seems that some of our customers are missing age data.// ~= means "not equal", so this command counts the observations where _9age is not missing count if _9age~=.// == means "equal", so this command counts the observations where _9age is missing count if _9age==.// Testing for Bias// generate a new categorical variable that equals 1 if _9age is not missing, and 0 if _9age is missingg _9ageExists=1 if _9age~=.replace _9ageExists=0 if _9ageExists==.bysort _9ageExists: count if _9age==.// compare the average profitability of customers where age data is and isn't missingbysort _9ageExists: sum _9profit// is this difference significant? Once again, we can use a t-test or a regression to find out.// t-testttest _9profit, by(_9ageExists)// regressionregress _9profit _9ageExists// Ways to Manage the Missing Data// we could create a variable just like _9age, except that we subsitute the missing observations with zero// recode subsubtitutes the missing observations with zero, and generate creates a new variable called _9ageZero that contains this new information// the _9age variable remains unchangedrecode _9age (.=0), generate(_9ageZero)// try our regression controlling for age, this time using _9ageZero instead of _9ageregress _9profit _9online _9ageZero// closes your loglog close// drops all data from Stata's memoryclear